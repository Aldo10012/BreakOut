(()=>{"use strict";class t{constructor(t=0,s=0,i=100,e=100,h="#0095DD"){this.x=t,this.y=s,this.width=i,this.height=e,this.color=h}draw(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath()}}const s=t;new t;const i=class extends s{constructor(t,s,i=5,e=10){super(t,s,e/2,e/2),this.speed=i,this.dx=i,this.dy=-i,this.radius=e}draw(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill(),t.closePath()}},e=class extends s{constructor(t,s=10,i=75){super((t.width-i)/2,t.height-s,i,s),this.starterX=this.x}},h=class extends s{constructor(t,s,i=75,e=20){super(t,s,i,e),this.status=1}draw(t,s,i){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),s%2==0&&i%2==0||s%2==1&&i%2==1?(this.color="#000000",t.fillStyle=this.color):t.fillStyle=this.color,t.fill(),t.closePath()}},l=class extends s{constructor(t,s,i,e,h="#0095DD",l="16px Arial"){super(i,e,0,0,h),this.text=t,this.value=s,this.font=l}draw(t){t.font=this.font,t.fillStyle=this.color,t.fillText(`${this.text}: ${this.value}`,this.x,this.y)}},a=document.getElementById("myCanvas"),d=a.getContext("2d");new class{constructor(t,s){this.canvas=t,this.ball=new i(t.width/2,t.height-30),this.paddle=new e(t),this.bricks=new class{constructor(){this.rowCount=3,this.columnCount=5,this.padding=10,this.offsetTop=30,this.offsetLeft=30,this.bricks=[]}initializedBricks(){for(let t=0;t<this.columnCount;t+=1){this.bricks[t]=[];for(let s=0;s<this.rowCount;s+=1){const i=75,e=20,l=t*(i+this.padding)+this.offsetLeft,a=s*(e+this.padding)+this.offsetTop;this.bricks[t][s]=new h(l,a,i,e)}}}draw(t){for(let s=0;s<this.columnCount;s+=1)for(let i=0;i<this.rowCount;i+=1){const e=this.bricks[s][i];1===e.status&&e.draw(t,i,s)}}},this.scoreLabel=new l("Score",0,8,20),this.livesLabel=new l("Lives",3,t.width-65,20),this.rightPressed=!1,this.leftPressed=!1,this.setup(),this.draw(s)}setup(){this.resetBallAndPaddle(),this.bricks.initializedBricks(),new class{constructor(t,s){this.rightPressed=!1,this.leftPressed=!1,this.canvas=t,this.paddle=s}keyDownHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!0:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!0)}keyUpHandler(t){"Right"===t.key||"ArrowRight"===t.key?this.rightPressed=!1:"Left"!==t.key&&"ArrowLeft"!==t.key||(this.leftPressed=!1)}mouseMoveHandler(t){const s=t.clientX-this.canvas.offsetLeft;s>0&&s<this.canvas.width&&(this.paddle.x=s-this.paddle.width/2)}setupEventListeners(){this.keyDown(),this.keyUp(),this.mouseMove()}keyDown(){document.addEventListener("keydown",this.keyDownHandler.bind(this),!1)}keyUp(){document.addEventListener("keyup",this.keyUpHandler.bind(this),!1)}mouseMove(){document.addEventListener("mousemove",this.mouseMoveHandler.bind(this),!1)}}(this.canvas,this.paddle).setupEventListeners()}resetBallAndPaddle(){this.ball.x=this.canvas.width/2,this.ball.y=this.canvas.height-30,this.ball.dx=this.ball.speed,this.ball.dy=-this.ball.speed,this.paddle.x=this.paddle.starterX}collisionDetection(){for(let t=0;t<this.bricks.columnCount;t+=1)for(let s=0;s<this.bricks.rowCount;s+=1){const i=this.bricks.bricks[t][s];1===i.status&&this.ball.x>i.x&&this.ball.x<i.x+i.width&&this.ball.y>i.y&&this.ball.y<i.y+i.height&&(this.ball.dy=-this.ball.dy,i.status=0,this.scoreLabel.value+=1,this.scoreLabel.value===this.bricks.rowCount*this.bricks.columnCount&&(alert("YOU WIN, CONGRATULATIONS!"),document.location.reload()))}}checkIfBallHitSide(){(this.ball.x+this.ball.dx>this.canvas.width-this.ball.radius||this.ball.x+this.ball.dx<this.ball.radius)&&(this.ball.dx=-this.ball.dx),this.ball.y+this.ball.dy<this.ball.radius?this.ball.dy=-this.ball.dy:this.ball.y+this.ball.dy>this.canvas.height-this.ball.radius&&(this.ball.x>this.paddle.x&&this.ball.x<this.paddle.x+this.paddle.width?this.ball.dy=-this.ball.dy:(this.livesLabel.value-=1,this.livesLabel.value?this.resetBallAndPaddle():(alert("GAME OVER"),document.location.reload())))}checkIfKeyWasPressed(){this.rightPressed?(this.paddle.x+=7,this.paddle.x+this.paddle.width>this.canvas.width&&(this.paddle.x=this.canvas.width-this.paddle.width)):this.leftPressed&&(this.paddle.x-=7,this.paddle.x<0&&(this.paddle.x=0))}draw(t){console.log("-- draw() --"),t.clearRect(0,0,this.canvas.width,this.canvas.height),this.bricks.draw(t),this.ball.draw(t),this.paddle.draw(t),this.scoreLabel.draw(t),this.livesLabel.draw(t),this.collisionDetection(),this.checkIfBallHitSide(),this.checkIfKeyWasPressed(),this.ball.x+=this.ball.dx,this.ball.y+=this.ball.dy,requestAnimationFrame((()=>{this.draw(t)}))}}(a,d)})();